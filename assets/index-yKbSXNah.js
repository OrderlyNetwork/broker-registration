import{c as D,k as at}from"./index-BVRR3Akw.js";const ot=()=>"9.0.0",ct=e=>e.toString(16).padStart(2,"0"),ut=e=>{const t=new Uint8Array(e/2);return window.crypto.getRandomValues(t),Array.from(t,ct).join("")},ft=()=>typeof window<"u"?ut(10):new Date().getTime().toString(36);class G{}G.makeRequest=(e,t)=>({id:ft(),method:e,params:t,env:{sdkVersion:ot()}});G.makeResponse=(e,t,n)=>({id:e,success:!0,version:n,data:t});G.makeErrorResponse=(e,t,n)=>({id:e,success:!1,error:t,version:n});var y;(function(e){e.sendTransactions="sendTransactions",e.rpcCall="rpcCall",e.getChainInfo="getChainInfo",e.getSafeInfo="getSafeInfo",e.getTxBySafeTxHash="getTxBySafeTxHash",e.getSafeBalances="getSafeBalances",e.signMessage="signMessage",e.signTypedMessage="signTypedMessage",e.getEnvironmentInfo="getEnvironmentInfo",e.getOffChainSignature="getOffChainSignature",e.requestAddressBook="requestAddressBook",e.wallet_getPermissions="wallet_getPermissions",e.wallet_requestPermissions="wallet_requestPermissions"})(y||(y={}));var X;(function(e){e.requestAddressBook="requestAddressBook"})(X||(X={}));class dt{constructor(t=null,n=!1){this.allowedOrigins=null,this.callbacks=new Map,this.debugMode=!1,this.isServer=typeof window>"u",this.isValidMessage=({origin:s,data:i,source:r})=>{const a=!i,c=!this.isServer&&r===window.parent,d=typeof i.version<"u"&&parseInt(i.version.split(".")[0]),m=typeof d=="number"&&d>=1;let g=!0;return Array.isArray(this.allowedOrigins)&&(g=this.allowedOrigins.find(b=>b.test(s))!==void 0),!a&&c&&m&&g},this.logIncomingMessage=s=>{console.info(`Safe Apps SDK v1: A message was received from origin ${s.origin}. `,s.data)},this.onParentMessage=s=>{this.isValidMessage(s)&&(this.debugMode&&this.logIncomingMessage(s),this.handleIncomingMessage(s.data))},this.handleIncomingMessage=s=>{const{id:i}=s,r=this.callbacks.get(i);r&&(r(s),this.callbacks.delete(i))},this.send=(s,i)=>{const r=G.makeRequest(s,i);if(this.isServer)throw new Error("Window doesn't exist");return window.parent.postMessage(r,"*"),new Promise((a,c)=>{this.callbacks.set(r.id,d=>{if(!d.success){c(new Error(d.error));return}a(d)})})},this.allowedOrigins=t,this.debugMode=n,this.isServer||window.addEventListener("message",this.onParentMessage)}}const de=e=>typeof e=="object"&&e!=null&&"domain"in e&&"types"in e&&"message"in e;var j={},O={},T={},ee=D&&D.__awaiter||function(e,t,n,s){function i(r){return r instanceof n?r:new n(function(a){a(r)})}return new(n||(n=Promise))(function(r,a){function c(g){try{m(s.next(g))}catch(b){a(b)}}function d(g){try{m(s.throw(g))}catch(b){a(b)}}function m(g){g.done?r(g.value):i(g.value).then(c,d)}m((s=s.apply(e,t||[])).next())})};Object.defineProperty(T,"__esModule",{value:!0});T.deleteData=T.fetchData=T.stringifyQuery=T.insertParams=void 0;const lt=e=>typeof e=="object"&&e!==null&&"code"in e&&"message"in e;function ht(e,t,n){return e.replace(new RegExp(`\\{${t}\\}`,"g"),n)}function gt(e,t){return t?Object.keys(t).reduce((n,s)=>ht(n,s,String(t[s])),e):e}T.insertParams=gt;function yt(e){if(!e)return"";const t=new URLSearchParams;Object.keys(e).forEach(s=>{e[s]!=null&&t.append(s,String(e[s]))});const n=t.toString();return n?`?${n}`:""}T.stringifyQuery=yt;function le(e){return ee(this,void 0,void 0,function*(){let t;try{t=yield e.json()}catch{if(e.headers&&e.headers.get("content-length")!=="0")throw new Error(`Invalid response content: ${e.statusText}`)}if(!e.ok){const n=lt(t)?`${t.code}: ${t.message}`:e.statusText;throw new Error(n)}return t})}function pt(e,t){return ee(this,void 0,void 0,function*(){let n;t!=null&&(n={method:"POST",body:typeof t=="string"?t:JSON.stringify(t),headers:{"Content-Type":"application/json"}});const s=yield fetch(e,n);return le(s)})}T.fetchData=pt;function mt(e){return ee(this,void 0,void 0,function*(){const n=yield fetch(e,{method:"DELETE"});return le(n)})}T.deleteData=mt;Object.defineProperty(O,"__esModule",{value:!0});O.deleteEndpoint=O.getEndpoint=O.postEndpoint=void 0;const M=T;function te(e,t,n,s){const i=(0,M.insertParams)(t,n),r=(0,M.stringifyQuery)(s);return`${e}${i}${r}`}function Et(e,t,n){const s=te(e,t,n==null?void 0:n.path,n==null?void 0:n.query);return(0,M.fetchData)(s,n==null?void 0:n.body)}O.postEndpoint=Et;function bt(e,t,n,s){if(s)return(0,M.fetchData)(s);const i=te(e,t,n==null?void 0:n.path,n==null?void 0:n.query);return(0,M.fetchData)(i)}O.getEndpoint=bt;function At(e,t,n){const s=te(e,t,n==null?void 0:n.path);return(0,M.deleteData)(s)}O.deleteEndpoint=At;var V={};Object.defineProperty(V,"__esModule",{value:!0});V.DEFAULT_BASE_URL=void 0;V.DEFAULT_BASE_URL="https://safe-client.safe.global";var he={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ImplementationVersionState=void 0,function(t){t.UP_TO_DATE="UP_TO_DATE",t.OUTDATED="OUTDATED",t.UNKNOWN="UNKNOWN"}(e.ImplementationVersionState||(e.ImplementationVersionState={}))})(he);var ge={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.SafeAppSocialPlatforms=e.SafeAppFeatures=e.SafeAppAccessPolicyTypes=void 0,function(t){t.NoRestrictions="NO_RESTRICTIONS",t.DomainAllowlist="DOMAIN_ALLOWLIST"}(e.SafeAppAccessPolicyTypes||(e.SafeAppAccessPolicyTypes={})),function(t){t.BATCHED_TRANSACTIONS="BATCHED_TRANSACTIONS"}(e.SafeAppFeatures||(e.SafeAppFeatures={})),function(t){t.TWITTER="TWITTER",t.GITHUB="GITHUB",t.DISCORD="DISCORD"}(e.SafeAppSocialPlatforms||(e.SafeAppSocialPlatforms={}))})(ge);var ye={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.LabelValue=e.DetailedExecutionInfoType=e.TransactionListItemType=e.ConflictType=e.TransactionInfoType=e.SettingsInfoType=e.TransactionTokenType=e.TransferDirection=e.TransactionStatus=e.Operation=void 0,function(t){t[t.CALL=0]="CALL",t[t.DELEGATE=1]="DELEGATE"}(e.Operation||(e.Operation={})),function(t){t.AWAITING_CONFIRMATIONS="AWAITING_CONFIRMATIONS",t.AWAITING_EXECUTION="AWAITING_EXECUTION",t.CANCELLED="CANCELLED",t.FAILED="FAILED",t.SUCCESS="SUCCESS"}(e.TransactionStatus||(e.TransactionStatus={})),function(t){t.INCOMING="INCOMING",t.OUTGOING="OUTGOING",t.UNKNOWN="UNKNOWN"}(e.TransferDirection||(e.TransferDirection={})),function(t){t.ERC20="ERC20",t.ERC721="ERC721",t.NATIVE_COIN="NATIVE_COIN"}(e.TransactionTokenType||(e.TransactionTokenType={})),function(t){t.SET_FALLBACK_HANDLER="SET_FALLBACK_HANDLER",t.ADD_OWNER="ADD_OWNER",t.REMOVE_OWNER="REMOVE_OWNER",t.SWAP_OWNER="SWAP_OWNER",t.CHANGE_THRESHOLD="CHANGE_THRESHOLD",t.CHANGE_IMPLEMENTATION="CHANGE_IMPLEMENTATION",t.ENABLE_MODULE="ENABLE_MODULE",t.DISABLE_MODULE="DISABLE_MODULE",t.SET_GUARD="SET_GUARD",t.DELETE_GUARD="DELETE_GUARD"}(e.SettingsInfoType||(e.SettingsInfoType={})),function(t){t.TRANSFER="Transfer",t.SETTINGS_CHANGE="SettingsChange",t.CUSTOM="Custom",t.CREATION="Creation"}(e.TransactionInfoType||(e.TransactionInfoType={})),function(t){t.NONE="None",t.HAS_NEXT="HasNext",t.END="End"}(e.ConflictType||(e.ConflictType={})),function(t){t.TRANSACTION="TRANSACTION",t.LABEL="LABEL",t.CONFLICT_HEADER="CONFLICT_HEADER",t.DATE_LABEL="DATE_LABEL"}(e.TransactionListItemType||(e.TransactionListItemType={})),function(t){t.MULTISIG="MULTISIG",t.MODULE="MODULE"}(e.DetailedExecutionInfoType||(e.DetailedExecutionInfoType={})),function(t){t.Queued="Queued",t.Next="Next"}(e.LabelValue||(e.LabelValue={}))})(ye);var pe={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.FEATURES=e.GAS_PRICE_TYPE=e.RPC_AUTHENTICATION=void 0,function(t){t.API_KEY_PATH="API_KEY_PATH",t.NO_AUTHENTICATION="NO_AUTHENTICATION",t.UNKNOWN="UNKNOWN"}(e.RPC_AUTHENTICATION||(e.RPC_AUTHENTICATION={})),function(t){t.ORACLE="ORACLE",t.FIXED="FIXED",t.FIXED_1559="FIXED1559",t.UNKNOWN="UNKNOWN"}(e.GAS_PRICE_TYPE||(e.GAS_PRICE_TYPE={})),function(t){t.ERC721="ERC721",t.SAFE_APPS="SAFE_APPS",t.CONTRACT_INTERACTION="CONTRACT_INTERACTION",t.DOMAIN_LOOKUP="DOMAIN_LOOKUP",t.SPENDING_LIMIT="SPENDING_LIMIT",t.EIP1559="EIP1559",t.SAFE_TX_GAS_OPTIONAL="SAFE_TX_GAS_OPTIONAL",t.TX_SIMULATION="TX_SIMULATION",t.EIP1271="EIP1271"}(e.FEATURES||(e.FEATURES={}))})(pe);var me={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.TokenType=void 0,function(t){t.ERC20="ERC20",t.ERC721="ERC721",t.NATIVE_TOKEN="NATIVE_TOKEN"}(e.TokenType||(e.TokenType={}))})(me);var Ee={};Object.defineProperty(Ee,"__esModule",{value:!0});var be={};Object.defineProperty(be,"__esModule",{value:!0});var Ae={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.SafeMessageStatus=e.SafeMessageListItemType=void 0,function(t){t.DATE_LABEL="DATE_LABEL",t.MESSAGE="MESSAGE"}(e.SafeMessageListItemType||(e.SafeMessageListItemType={})),function(t){t.NEEDS_CONFIRMATION="NEEDS_CONFIRMATION",t.CONFIRMED="CONFIRMED"}(e.SafeMessageStatus||(e.SafeMessageStatus={}))})(Ae);var Te={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.DeviceType=void 0,function(t){t.ANDROID="ANDROID",t.IOS="IOS",t.WEB="WEB"}(e.DeviceType||(e.DeviceType={}))})(Te);(function(e){var t=D&&D.__createBinding||(Object.create?function(o,u,f,l){l===void 0&&(l=f);var C=Object.getOwnPropertyDescriptor(u,f);(!C||("get"in C?!u.__esModule:C.writable||C.configurable))&&(C={enumerable:!0,get:function(){return u[f]}}),Object.defineProperty(o,l,C)}:function(o,u,f,l){l===void 0&&(l=f),o[l]=u[f]}),n=D&&D.__exportStar||function(o,u){for(var f in o)f!=="default"&&!Object.prototype.hasOwnProperty.call(u,f)&&t(u,o,f)};Object.defineProperty(e,"__esModule",{value:!0}),e.unregisterDevice=e.unregisterSafe=e.registerDevice=e.getDelegates=e.confirmSafeMessage=e.proposeSafeMessage=e.getSafeMessage=e.getSafeMessages=e.getDecodedData=e.getMasterCopies=e.getSafeApps=e.getChainConfig=e.getChainsConfig=e.proposeTransaction=e.getNonces=e.postSafeGasEstimation=e.getTransactionDetails=e.getTransactionQueue=e.getTransactionHistory=e.getCollectiblesPage=e.getCollectibles=e.getOwnedSafes=e.getFiatCurrencies=e.getBalances=e.getMultisigTransactions=e.getModuleTransactions=e.getIncomingTransfers=e.getSafeInfo=e.setBaseUrl=void 0;const s=O,i=V;n(he,e),n(ge,e),n(ye,e),n(pe,e),n(me,e),n(Ee,e),n(be,e),n(Ae,e),n(Te,e);let r=i.DEFAULT_BASE_URL;const a=o=>{r=o};e.setBaseUrl=a;function c(o,u){return(0,s.getEndpoint)(r,"/v1/chains/{chainId}/safes/{address}",{path:{chainId:o,address:u}})}e.getSafeInfo=c;function d(o,u,f,l){return(0,s.getEndpoint)(r,"/v1/chains/{chainId}/safes/{address}/incoming-transfers/",{path:{chainId:o,address:u},query:f},l)}e.getIncomingTransfers=d;function m(o,u,f,l){return(0,s.getEndpoint)(r,"/v1/chains/{chainId}/safes/{address}/module-transactions/",{path:{chainId:o,address:u},query:f},l)}e.getModuleTransactions=m;function g(o,u,f,l){return(0,s.getEndpoint)(r,"/v1/chains/{chainId}/safes/{address}/multisig-transactions/",{path:{chainId:o,address:u},query:f},l)}e.getMultisigTransactions=g;function b(o,u,f="usd",l={}){return(0,s.getEndpoint)(r,"/v1/chains/{chainId}/safes/{address}/balances/{currency}",{path:{chainId:o,address:u,currency:f},query:l})}e.getBalances=b;function A(){return(0,s.getEndpoint)(r,"/v1/balances/supported-fiat-codes")}e.getFiatCurrencies=A;function U(o,u){return(0,s.getEndpoint)(r,"/v1/chains/{chainId}/owners/{address}/safes",{path:{chainId:o,address:u}})}e.getOwnedSafes=U;function F(o,u,f={}){return(0,s.getEndpoint)(r,"/v1/chains/{chainId}/safes/{address}/collectibles",{path:{chainId:o,address:u},query:f})}e.getCollectibles=F;function k(o,u,f={},l){return(0,s.getEndpoint)(r,"/v2/chains/{chainId}/safes/{address}/collectibles",{path:{chainId:o,address:u},query:f},l)}e.getCollectiblesPage=k;function W(o,u,f={},l){return(0,s.getEndpoint)(r,"/v1/chains/{chainId}/safes/{safe_address}/transactions/history",{path:{chainId:o,safe_address:u},query:f},l)}e.getTransactionHistory=W;function P(o,u,f={},l){return(0,s.getEndpoint)(r,"/v1/chains/{chainId}/safes/{safe_address}/transactions/queued",{path:{chainId:o,safe_address:u},query:f},l)}e.getTransactionQueue=P;function K(o,u){return(0,s.getEndpoint)(r,"/v1/chains/{chainId}/transactions/{transactionId}",{path:{chainId:o,transactionId:u}})}e.getTransactionDetails=K;function Ve(o,u,f){return(0,s.postEndpoint)(r,"/v2/chains/{chainId}/safes/{safe_address}/multisig-transactions/estimations",{path:{chainId:o,safe_address:u},body:f})}e.postSafeGasEstimation=Ve;function qe(o,u){return(0,s.getEndpoint)(r,"/v1/chains/{chainId}/safes/{safe_address}/nonces",{path:{chainId:o,safe_address:u}})}e.getNonces=qe;function We(o,u,f){return(0,s.postEndpoint)(r,"/v1/chains/{chainId}/transactions/{safe_address}/propose",{path:{chainId:o,safe_address:u},body:f})}e.proposeTransaction=We;function Ke(o){return(0,s.getEndpoint)(r,"/v1/chains",{query:o})}e.getChainsConfig=Ke;function Xe(o){return(0,s.getEndpoint)(r,"/v1/chains/{chainId}",{path:{chainId:o}})}e.getChainConfig=Xe;function Qe(o,u={}){return(0,s.getEndpoint)(r,"/v1/chains/{chainId}/safe-apps",{path:{chainId:o},query:u})}e.getSafeApps=Qe;function Ye(o){return(0,s.getEndpoint)(r,"/v1/chains/{chainId}/about/master-copies",{path:{chainId:o}})}e.getMasterCopies=Ye;function Je(o,u,f){return(0,s.postEndpoint)(r,"/v1/chains/{chainId}/data-decoder",{path:{chainId:o},body:{data:u,to:f}})}e.getDecodedData=Je;function Ze(o,u,f){return(0,s.getEndpoint)(r,"/v1/chains/{chainId}/safes/{safe_address}/messages",{path:{chainId:o,safe_address:u},query:{}},f)}e.getSafeMessages=Ze;function xe(o,u){return(0,s.getEndpoint)(r,"/v1/chains/{chainId}/messages/{message_hash}",{path:{chainId:o,message_hash:u}})}e.getSafeMessage=xe;function et(o,u,f){return(0,s.postEndpoint)(r,"/v1/chains/{chainId}/safes/{safe_address}/messages",{path:{chainId:o,safe_address:u},body:f})}e.proposeSafeMessage=et;function tt(o,u,f){return(0,s.postEndpoint)(r,"/v1/chains/{chainId}/messages/{message_hash}/signatures",{path:{chainId:o,message_hash:u},body:f})}e.confirmSafeMessage=tt;function nt(o,u={}){return(0,s.getEndpoint)(r,"/v1/chains/{chainId}/delegates",{path:{chainId:o},query:u})}e.getDelegates=nt;function st(o){return(0,s.postEndpoint)(r,"/v1/register/notifications",{body:o})}e.registerDevice=st;function it(o,u,f){return(0,s.deleteEndpoint)(r,"/v1/chains/{chainId}/notifications/devices/{uuid}/safes/{safe_address}",{path:{chainId:o,safe_address:u,uuid:f}})}e.unregisterSafe=it;function rt(o,u){return(0,s.deleteEndpoint)(r,"/v1/chains/{chainId}/notifications/devices/{uuid}",{path:{chainId:o,uuid:u}})}e.unregisterDevice=rt})(j);class Tt{constructor(t){this.communicator=t}async getBySafeTxHash(t){if(!t)throw new Error("Invalid safeTxHash");return(await this.communicator.send(y.getTxBySafeTxHash,{safeTxHash:t})).data}async signMessage(t){const n={message:t};return(await this.communicator.send(y.signMessage,n)).data}async signTypedMessage(t){if(!de(t))throw new Error("Invalid typed data");return(await this.communicator.send(y.signTypedMessage,{typedData:t})).data}async send({txs:t,params:n}){if(!t||!t.length)throw new Error("No transactions were passed");const s={txs:t,params:n};return(await this.communicator.send(y.sendTransactions,s)).data}}const p={eth_call:"eth_call",eth_gasPrice:"eth_gasPrice",eth_getLogs:"eth_getLogs",eth_getBalance:"eth_getBalance",eth_getCode:"eth_getCode",eth_getBlockByHash:"eth_getBlockByHash",eth_getBlockByNumber:"eth_getBlockByNumber",eth_getStorageAt:"eth_getStorageAt",eth_getTransactionByHash:"eth_getTransactionByHash",eth_getTransactionReceipt:"eth_getTransactionReceipt",eth_getTransactionCount:"eth_getTransactionCount",eth_estimateGas:"eth_estimateGas",safe_setSettings:"safe_setSettings"},_={defaultBlockParam:(e="latest")=>e,returnFullTxObjectParam:(e=!1)=>e,blockNumberToHex:e=>Number.isInteger(e)?`0x${e.toString(16)}`:e};class St{constructor(t){this.communicator=t,this.call=this.buildRequest({call:p.eth_call,formatters:[null,_.defaultBlockParam]}),this.getBalance=this.buildRequest({call:p.eth_getBalance,formatters:[null,_.defaultBlockParam]}),this.getCode=this.buildRequest({call:p.eth_getCode,formatters:[null,_.defaultBlockParam]}),this.getStorageAt=this.buildRequest({call:p.eth_getStorageAt,formatters:[null,_.blockNumberToHex,_.defaultBlockParam]}),this.getPastLogs=this.buildRequest({call:p.eth_getLogs}),this.getBlockByHash=this.buildRequest({call:p.eth_getBlockByHash,formatters:[null,_.returnFullTxObjectParam]}),this.getBlockByNumber=this.buildRequest({call:p.eth_getBlockByNumber,formatters:[_.blockNumberToHex,_.returnFullTxObjectParam]}),this.getTransactionByHash=this.buildRequest({call:p.eth_getTransactionByHash}),this.getTransactionReceipt=this.buildRequest({call:p.eth_getTransactionReceipt}),this.getTransactionCount=this.buildRequest({call:p.eth_getTransactionCount,formatters:[null,_.defaultBlockParam]}),this.getGasPrice=this.buildRequest({call:p.eth_gasPrice}),this.getEstimateGas=n=>this.buildRequest({call:p.eth_estimateGas})([n]),this.setSafeSettings=this.buildRequest({call:p.safe_setSettings})}buildRequest(t){const{call:n,formatters:s}=t;return async i=>{s&&Array.isArray(i)&&s.forEach((c,d)=>{c&&(i[d]=c(i[d]))});const r={call:n,params:i||[]};return(await this.communicator.send(y.rpcCall,r)).data}}}function _t(e,t){const n=e.exec(t);return n==null?void 0:n.groups}const ae=/^tuple(?<array>(\[(\d*)\])*)$/;function Q(e){let t=e.type;if(ae.test(e.type)&&"components"in e){t="(";const n=e.components.length;for(let i=0;i<n;i++){const r=e.components[i];t+=Q(r),i<n-1&&(t+=", ")}const s=_t(ae,e.type);return t+=`)${(s==null?void 0:s.array)??""}`,Q({...e,type:t})}return"indexed"in e&&e.indexed&&(t=`${t} indexed`),e.name?`${t} ${e.name}`:t}function B(e){let t="";const n=e.length;for(let s=0;s<n;s++){const i=e[s];t+=Q(i),s!==n-1&&(t+=", ")}return t}function It(e){return e.type==="function"?`function ${e.name}(${B(e.inputs)})${e.stateMutability&&e.stateMutability!=="nonpayable"?` ${e.stateMutability}`:""}${e.outputs.length?` returns (${B(e.outputs)})`:""}`:e.type==="event"?`event ${e.name}(${B(e.inputs)})`:e.type==="error"?`error ${e.name}(${B(e.inputs)})`:e.type==="constructor"?`constructor(${B(e.inputs)})${e.stateMutability==="payable"?" payable":""}`:e.type==="fallback"?"fallback()":"receive() external payable"}function Y(e,{includeName:t=!1}={}){if(e.type!=="function"&&e.type!=="event"&&e.type!=="error")throw new Rt(e.type);return`${e.name}(${Se(e.inputs,{includeName:t})})`}function Se(e,{includeName:t=!1}={}){return e?e.map(n=>Ot(n,{includeName:t})).join(t?", ":","):""}function Ot(e,{includeName:t}){return e.type.startsWith("tuple")?`(${Se(e.components,{includeName:t})})${e.type.slice(5)}`:e.type+(t&&e.name?` ${e.name}`:"")}function H(e,{strict:t=!0}={}){return!e||typeof e!="string"?!1:t?/^0x[0-9a-fA-F]*$/.test(e):e.startsWith("0x")}function E(e){return H(e,{strict:!1})?Math.ceil((e.length-2)/2):e.length}const wt="1.21.3",vt=()=>`viem@${wt}`;class h extends Error{constructor(t,n={}){var r;super(),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ViemError"}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:vt()});const s=n.cause instanceof h?n.cause.details:(r=n.cause)!=null&&r.message?n.cause.message:n.details,i=n.cause instanceof h&&n.cause.docsPath||n.docsPath;this.message=[t||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...i?[`Docs: https://viem.sh${i}.html${n.docsSlug?`#${n.docsSlug}`:""}`]:[],...s?[`Details: ${s}`]:[],`Version: ${this.version}`].join(`
`),n.cause&&(this.cause=n.cause),this.details=s,this.docsPath=i,this.metaMessages=n.metaMessages,this.shortMessage=t}walk(t){return _e(this,t)}}function _e(e,t){return t!=null&&t(e)?e:e&&typeof e=="object"&&"cause"in e?_e(e.cause,t):t?null:e}class Nt extends h{constructor({expectedLength:t,givenLength:n,type:s}){super([`ABI encoding array length mismatch for type ${s}.`,`Expected length: ${t}`,`Given length: ${n}`].join(`
`)),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiEncodingArrayLengthMismatchError"})}}class Pt extends h{constructor({expectedSize:t,value:n}){super(`Size of bytes "${n}" (bytes${E(n)}) does not match expected size (bytes${t}).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiEncodingBytesSizeMismatchError"})}}class Ct extends h{constructor({expectedLength:t,givenLength:n}){super(["ABI encoding params/values length mismatch.",`Expected length (params): ${t}`,`Given length (values): ${n}`].join(`
`)),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiEncodingLengthMismatchError"})}}class oe extends h{constructor(t,{docsPath:n}={}){super([`Function ${t?`"${t}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the function exists on it."].join(`
`),{docsPath:n}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiFunctionNotFoundError"})}}class Dt extends h{constructor(t,n){super("Found ambiguous types in overloaded ABI items.",{metaMessages:[`\`${t.type}\` in \`${Y(t.abiItem)}\`, and`,`\`${n.type}\` in \`${Y(n.abiItem)}\``,"","These types encode differently and cannot be distinguished at runtime.","Remove one of the ambiguous items in the ABI."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiItemAmbiguityError"})}}class Mt extends h{constructor({expectedSize:t,givenSize:n}){super(`Expected bytes${t}, got bytes${n}.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BytesSizeMismatchError"})}}class $t extends h{constructor(t,{docsPath:n}){super([`Type "${t}" is not a valid encoding type.`,"Please provide a valid ABI type."].join(`
`),{docsPath:n}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiEncodingType"})}}class Bt extends h{constructor(t){super([`Value "${t}" is not a valid array.`].join(`
`)),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidArrayError"})}}class Rt extends h{constructor(t){super([`"${t}" is not a valid definition type.`,'Valid types: "function", "event", "error"'].join(`
`)),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidDefinitionTypeError"})}}class Ie extends h{constructor({offset:t,position:n,size:s}){super(`Slice ${n==="start"?"starting":"ending"} at offset "${t}" is out-of-bounds (size: ${s}).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SliceOffsetOutOfBoundsError"})}}class Oe extends h{constructor({size:t,targetSize:n,type:s}){super(`${s.charAt(0).toUpperCase()}${s.slice(1).toLowerCase()} size (${t}) exceeds padding size (${n}).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SizeExceedsPaddingSizeError"})}}function $(e,{dir:t,size:n=32}={}){return typeof e=="string"?w(e,{dir:t,size:n}):Lt(e,{dir:t,size:n})}function w(e,{dir:t,size:n=32}={}){if(n===null)return e;const s=e.replace("0x","");if(s.length>n*2)throw new Oe({size:Math.ceil(s.length/2),targetSize:n,type:"hex"});return`0x${s[t==="right"?"padEnd":"padStart"](n*2,"0")}`}function Lt(e,{dir:t,size:n=32}={}){if(n===null)return e;if(e.length>n)throw new Oe({size:e.length,targetSize:n,type:"bytes"});const s=new Uint8Array(n);for(let i=0;i<n;i++){const r=t==="right";s[r?i:n-i-1]=e[r?i:e.length-i-1]}return s}class jt extends h{constructor({max:t,min:n,signed:s,size:i,value:r}){super(`Number "${r}" is not in safe ${i?`${i*8}-bit ${s?"signed":"unsigned"} `:""}integer range ${t?`(${n} to ${t})`:`(above ${n})`}`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"IntegerOutOfRangeError"})}}class Ht extends h{constructor({givenSize:t,maxSize:n}){super(`Size cannot exceed ${n} bytes. Given size: ${t} bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SizeOverflowError"})}}function z(e,{size:t}){if(E(e)>t)throw new Ht({givenSize:E(e),maxSize:t})}const zt=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function ne(e,t={}){return typeof e=="number"||typeof e=="bigint"?N(e,t):typeof e=="string"?Ne(e,t):typeof e=="boolean"?we(e,t):ve(e,t)}function we(e,t={}){const n=`0x${Number(e)}`;return typeof t.size=="number"?(z(n,{size:t.size}),$(n,{size:t.size})):n}function ve(e,t={}){let n="";for(let i=0;i<e.length;i++)n+=zt[e[i]];const s=`0x${n}`;return typeof t.size=="number"?(z(s,{size:t.size}),$(s,{dir:"right",size:t.size})):s}function N(e,t={}){const{signed:n,size:s}=t,i=BigInt(e);let r;s?n?r=(1n<<BigInt(s)*8n-1n)-1n:r=2n**(BigInt(s)*8n)-1n:typeof e=="number"&&(r=BigInt(Number.MAX_SAFE_INTEGER));const a=typeof r=="bigint"&&n?-r-1n:0;if(r&&i>r||i<a){const d=typeof e=="bigint"?"n":"";throw new jt({max:r?`${r}${d}`:void 0,min:`${a}${d}`,signed:n,size:s,value:`${e}${d}`})}const c=`0x${(n&&i<0?(1n<<BigInt(s*8))+BigInt(i):i).toString(16)}`;return s?$(c,{size:s}):c}const Ut=new TextEncoder;function Ne(e,t={}){const n=Ut.encode(e);return ve(n,t)}const Ft=new TextEncoder;function q(e,t={}){return typeof e=="number"||typeof e=="bigint"?Gt(e,t):typeof e=="boolean"?kt(e,t):H(e)?Pe(e,t):J(e,t)}function kt(e,t={}){const n=new Uint8Array(1);return n[0]=Number(e),typeof t.size=="number"?(z(n,{size:t.size}),$(n,{size:t.size})):n}const I={zero:48,nine:57,A:65,F:70,a:97,f:102};function ce(e){if(e>=I.zero&&e<=I.nine)return e-I.zero;if(e>=I.A&&e<=I.F)return e-(I.A-10);if(e>=I.a&&e<=I.f)return e-(I.a-10)}function Pe(e,t={}){let n=e;t.size&&(z(n,{size:t.size}),n=$(n,{dir:"right",size:t.size}));let s=n.slice(2);s.length%2&&(s=`0${s}`);const i=s.length/2,r=new Uint8Array(i);for(let a=0,c=0;a<i;a++){const d=ce(s.charCodeAt(c++)),m=ce(s.charCodeAt(c++));if(d===void 0||m===void 0)throw new h(`Invalid byte sequence ("${s[c-2]}${s[c-1]}" in "${s}").`);r[a]=d*16+m}return r}function Gt(e,t){const n=N(e,t);return Pe(n)}function J(e,t={}){const n=Ft.encode(e);return typeof t.size=="number"?(z(n,{size:t.size}),$(n,{dir:"right",size:t.size})):n}function Vt(e){let t=!0,n="",s=0,i="",r=!1;for(let a=0;a<e.length;a++){const c=e[a];if(["(",")",","].includes(c)&&(t=!0),c==="("&&s++,c===")"&&s--,!!t){if(s===0){if(c===" "&&["event","function",""].includes(i))i="";else if(i+=c,c===")"){r=!0;break}continue}if(c===" "){e[a-1]!==","&&n!==","&&n!==",("&&(n="",t=!1);continue}i+=c,n+=c}}if(!r)throw new h("Unable to normalize signature.");return i}const Ce=e=>{const t=typeof e=="string"?e:It(e);return Vt(t)},qt=e=>Ce(e);function S(e,t){const n=at(H(e,{strict:!1})?q(e):e);return ne(n)}const Wt=e=>S(q(e)),Kt=e=>Wt(qt(e));class De extends h{constructor({address:t}){super(`Address "${t}" is invalid.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAddressError"})}}const Xt=/^0x[a-fA-F0-9]{40}$/;function R(e){return Xt.test(e)}function v(e){return typeof e[0]=="string"?Me(e):Qt(e)}function Qt(e){let t=0;for(const i of e)t+=i.length;const n=new Uint8Array(t);let s=0;for(const i of e)n.set(i,s),s+=i.length;return n}function Me(e){return`0x${e.reduce((t,n)=>t+n.replace("0x",""),"")}`}function $e(e,t,n,{strict:s}={}){return H(e,{strict:!1})?Jt(e,t,n,{strict:s}):Yt(e,t,n,{strict:s})}function Be(e,t){if(typeof t=="number"&&t>0&&t>E(e)-1)throw new Ie({offset:t,position:"start",size:E(e)})}function Re(e,t,n){if(typeof t=="number"&&typeof n=="number"&&E(e)!==n-t)throw new Ie({offset:n,position:"end",size:E(e)})}function Yt(e,t,n,{strict:s}={}){Be(e,t);const i=e.slice(t,n);return s&&Re(i,t,n),i}function Jt(e,t,n,{strict:s}={}){Be(e,t);const i=`0x${e.replace("0x","").slice((t??0)*2,(n??e.length)*2)}`;return s&&Re(i,t,n),i}function se(e,t){if(e.length!==t.length)throw new Ct({expectedLength:e.length,givenLength:t.length});const n=Zt({params:e,values:t}),s=re(n);return s.length===0?"0x":s}function Zt({params:e,values:t}){const n=[];for(let s=0;s<e.length;s++)n.push(ie({param:e[s],value:t[s]}));return n}function ie({param:e,value:t}){const n=on(e.type);if(n){const[s,i]=n;return en(t,{length:s,param:{...e,type:i}})}if(e.type==="tuple")return an(t,{param:e});if(e.type==="address")return xt(t);if(e.type==="bool")return nn(t);if(e.type.startsWith("uint")||e.type.startsWith("int")){const s=e.type.startsWith("int");return sn(t,{signed:s})}if(e.type.startsWith("bytes"))return tn(t,{param:e});if(e.type==="string")return rn(t);throw new $t(e.type,{docsPath:"/docs/contract/encodeAbiParameters"})}function re(e){let t=0;for(let r=0;r<e.length;r++){const{dynamic:a,encoded:c}=e[r];a?t+=32:t+=E(c)}const n=[],s=[];let i=0;for(let r=0;r<e.length;r++){const{dynamic:a,encoded:c}=e[r];a?(n.push(N(t+i,{size:32})),s.push(c),i+=E(c)):n.push(c)}return v([...n,...s])}function xt(e){if(!R(e))throw new De({address:e});return{dynamic:!1,encoded:w(e.toLowerCase())}}function en(e,{length:t,param:n}){const s=t===null;if(!Array.isArray(e))throw new Bt(e);if(!s&&e.length!==t)throw new Nt({expectedLength:t,givenLength:e.length,type:`${n.type}[${t}]`});let i=!1;const r=[];for(let a=0;a<e.length;a++){const c=ie({param:n,value:e[a]});c.dynamic&&(i=!0),r.push(c)}if(s||i){const a=re(r);if(s){const c=N(r.length,{size:32});return{dynamic:!0,encoded:r.length>0?v([c,a]):c}}if(i)return{dynamic:!0,encoded:a}}return{dynamic:!1,encoded:v(r.map(({encoded:a})=>a))}}function tn(e,{param:t}){const[,n]=t.type.split("bytes"),s=E(e);if(!n){let i=e;return s%32!==0&&(i=w(i,{dir:"right",size:Math.ceil((e.length-2)/2/32)*32})),{dynamic:!0,encoded:v([w(N(s,{size:32})),i])}}if(s!==parseInt(n))throw new Pt({expectedSize:parseInt(n),value:e});return{dynamic:!1,encoded:w(e,{dir:"right"})}}function nn(e){return{dynamic:!1,encoded:w(we(e))}}function sn(e,{signed:t}){return{dynamic:!1,encoded:N(e,{size:32,signed:t})}}function rn(e){const t=Ne(e),n=Math.ceil(E(t)/32),s=[];for(let i=0;i<n;i++)s.push(w($e(t,i*32,(i+1)*32),{dir:"right"}));return{dynamic:!0,encoded:v([w(N(E(t),{size:32})),...s])}}function an(e,{param:t}){let n=!1;const s=[];for(let i=0;i<t.components.length;i++){const r=t.components[i],a=Array.isArray(e)?i:r.name,c=ie({param:r,value:e[a]});s.push(c),c.dynamic&&(n=!0)}return{dynamic:n,encoded:n?re(s):v(s.map(({encoded:i})=>i))}}function on(e){const t=e.match(/^(.*)\[(\d+)?\]$/);return t?[t[2]?Number(t[2]):null,t[1]]:void 0}const cn=e=>S(q(e)),Le=e=>$e(cn(Ce(e)),0,4);function un({abi:e,args:t=[],name:n}){const s=H(n,{strict:!1}),i=e.filter(a=>s?a.type==="function"?Le(a)===n:a.type==="event"?Kt(a)===n:!1:"name"in a&&a.name===n);if(i.length===0)return;if(i.length===1)return i[0];let r;for(const a of i){if(!("inputs"in a))continue;if(!t||t.length===0){if(!a.inputs||a.inputs.length===0)return a;continue}if(!a.inputs||a.inputs.length===0||a.inputs.length!==t.length)continue;if(t.every((d,m)=>{const g="inputs"in a&&a.inputs[m];return g?Z(d,g):!1})){if(r&&"inputs"in r&&r.inputs){const d=je(a.inputs,r.inputs,t);if(d)throw new Dt({abiItem:a,type:d[0]},{abiItem:r,type:d[1]})}r=a}}return r||i[0]}function Z(e,t){const n=typeof e,s=t.type;switch(s){case"address":return R(e);case"bool":return n==="boolean";case"function":return n==="string";case"string":return n==="string";default:return s==="tuple"&&"components"in t?Object.values(t.components).every((i,r)=>Z(Object.values(e)[r],i)):/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/.test(s)?n==="number"||n==="bigint":/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/.test(s)?n==="string"||e instanceof Uint8Array:/[a-z]+[1-9]{0,3}(\[[0-9]{0,}\])+$/.test(s)?Array.isArray(e)&&e.every(i=>Z(i,{...t,type:s.replace(/(\[[0-9]{0,}\])$/,"")})):!1}}function je(e,t,n){for(const s in e){const i=e[s],r=t[s];if(i.type==="tuple"&&r.type==="tuple"&&"components"in i&&"components"in r)return je(i.components,r.components,n[s]);const a=[i.type,r.type];if(a.includes("address")&&a.includes("bytes20")?!0:a.includes("address")&&a.includes("string")||a.includes("address")&&a.includes("bytes")?R(n[s]):!1)return a}}function ue({abi:e,args:t,functionName:n}){let s=e[0];if(n&&(s=un({abi:e,args:t,name:n}),!s))throw new oe(n,{docsPath:"/docs/contract/encodeFunctionData"});if(s.type!=="function")throw new oe(void 0,{docsPath:"/docs/contract/encodeFunctionData"});const i=Y(s),r=Le(i),a="inputs"in s&&s.inputs?se(s.inputs,t??[]):void 0;return Me([r,a??"0x"])}const fn=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,dn=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/;function ln({domain:e,message:t,primaryType:n,types:s}){const i=typeof e>"u"?{}:e,r={EIP712Domain:mn({domain:i}),...s};pn({domain:i,message:t,primaryType:n,types:r});const a=["0x1901"];return i&&a.push(hn({domain:i,types:r})),n!=="EIP712Domain"&&a.push(He({data:t,primaryType:n,types:r})),S(v(a))}function hn({domain:e,types:t}){return He({data:e,primaryType:"EIP712Domain",types:t})}function He({data:e,primaryType:t,types:n}){const s=ze({data:e,primaryType:t,types:n});return S(s)}function ze({data:e,primaryType:t,types:n}){const s=[{type:"bytes32"}],i=[gn({primaryType:t,types:n})];for(const r of n[t]){const[a,c]=Fe({types:n,name:r.name,type:r.type,value:e[r.name]});s.push(a),i.push(c)}return se(s,i)}function gn({primaryType:e,types:t}){const n=ne(yn({primaryType:e,types:t}));return S(n)}function yn({primaryType:e,types:t}){let n="";const s=Ue({primaryType:e,types:t});s.delete(e);const i=[e,...Array.from(s).sort()];for(const r of i)n+=`${r}(${t[r].map(({name:a,type:c})=>`${c} ${a}`).join(",")})`;return n}function Ue({primaryType:e,types:t},n=new Set){const s=e.match(/^\w*/u),i=s==null?void 0:s[0];if(n.has(i)||t[i]===void 0)return n;n.add(i);for(const r of t[i])Ue({primaryType:r.type,types:t},n);return n}function Fe({types:e,name:t,type:n,value:s}){if(e[n]!==void 0)return[{type:"bytes32"},S(ze({data:s,primaryType:n,types:e}))];if(n==="bytes")return s=`0x${(s.length%2?"0":"")+s.slice(2)}`,[{type:"bytes32"},S(s)];if(n==="string")return[{type:"bytes32"},S(ne(s))];if(n.lastIndexOf("]")===n.length-1){const i=n.slice(0,n.lastIndexOf("[")),r=s.map(a=>Fe({name:t,type:i,types:e,value:a}));return[{type:"bytes32"},S(se(r.map(([a])=>a),r.map(([,a])=>a)))]}return[{type:n},s]}function pn({domain:e,message:t,primaryType:n,types:s}){const i=s,r=(a,c)=>{for(const d of a){const{name:m,type:g}=d,b=g,A=c[m],U=b.match(dn);if(U&&(typeof A=="number"||typeof A=="bigint")){const[W,P,K]=U;N(A,{signed:P==="int",size:parseInt(K)/8})}if(b==="address"&&typeof A=="string"&&!R(A))throw new De({address:A});const F=b.match(fn);if(F){const[W,P]=F;if(P&&E(A)!==parseInt(P))throw new Mt({expectedSize:parseInt(P),givenSize:E(A)})}const k=i[b];k&&r(k,A)}};if(i.EIP712Domain&&e&&r(i.EIP712Domain,e),n!=="EIP712Domain"){const a=i[n];r(a,t)}}function mn({domain:e}){return[typeof(e==null?void 0:e.name)=="string"&&{name:"name",type:"string"},(e==null?void 0:e.version)&&{name:"version",type:"string"},typeof(e==null?void 0:e.chainId)=="number"&&{name:"chainId",type:"uint256"},(e==null?void 0:e.verifyingContract)&&{name:"verifyingContract",type:"address"},(e==null?void 0:e.salt)&&{name:"salt",type:"bytes32"}].filter(Boolean)}const En=`Ethereum Signed Message:
`;function bn(e,t){const n=typeof e=="string"?J(e):e.raw instanceof Uint8Array?e.raw:q(e.raw),s=J(`${En}${n.length}`);return S(v([s,n]))}const An="0x1626ba7e",Tn="0x20c13b0b",x=4001;class L extends Error{constructor(t,n,s){super(t),this.code=n,this.data=s,Object.setPrototypeOf(this,L.prototype)}}class ke{constructor(t){this.communicator=t}async getPermissions(){return(await this.communicator.send(y.wallet_getPermissions,void 0)).data}async requestPermissions(t){if(!this.isPermissionRequestValid(t))throw new L("Permissions request is invalid",x);try{return(await this.communicator.send(y.wallet_requestPermissions,t)).data}catch{throw new L("Permissions rejected",x)}}isPermissionRequestValid(t){return t.every(n=>typeof n=="object"?Object.keys(n).every(s=>!!Object.values(X).includes(s)):!1)}}const fe=(e,t)=>t.some(n=>n.parentCapability===e),Sn=()=>(e,t,n)=>{const s=n.value;return n.value=async function(){const i=new ke(this.communicator);let r=await i.getPermissions();if(fe(t,r)||(r=await i.requestPermissions([{[t]:{}}])),!fe(t,r))throw new L("Permissions rejected",x);return s.apply(this)},n};var _n=function(e,t,n,s){var i=arguments.length,r=i<3?t:s===null?s=Object.getOwnPropertyDescriptor(t,n):s,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(e,t,n,s);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(r=(i<3?a(r):i>3?a(t,n,r):a(t,n))||r);return i>3&&r&&Object.defineProperty(t,n,r),r};class Ge{constructor(t){this.communicator=t}async getChainInfo(){return(await this.communicator.send(y.getChainInfo,void 0)).data}async getInfo(){return(await this.communicator.send(y.getSafeInfo,void 0)).data}async experimental_getBalances({currency:t="usd"}={}){return(await this.communicator.send(y.getSafeBalances,{currency:t})).data}async check1271Signature(t,n="0x"){const s=await this.getInfo(),i=ue({abi:[{constant:!1,inputs:[{name:"_dataHash",type:"bytes32"},{name:"_signature",type:"bytes"}],name:"isValidSignature",outputs:[{name:"",type:"bytes4"}],payable:!1,stateMutability:"nonpayable",type:"function"}],functionName:"isValidSignature",args:[t,n]}),r={call:p.eth_call,params:[{to:s.safeAddress,data:i},"latest"]};try{return(await this.communicator.send(y.rpcCall,r)).data.slice(0,10).toLowerCase()===An}catch{return!1}}async check1271SignatureBytes(t,n="0x"){const s=await this.getInfo(),i=ue({abi:[{constant:!1,inputs:[{name:"_data",type:"bytes"},{name:"_signature",type:"bytes"}],name:"isValidSignature",outputs:[{name:"",type:"bytes4"}],payable:!1,stateMutability:"nonpayable",type:"function"}],functionName:"isValidSignature",args:[t,n]}),r={call:p.eth_call,params:[{to:s.safeAddress,data:i},"latest"]};try{return(await this.communicator.send(y.rpcCall,r)).data.slice(0,10).toLowerCase()===Tn}catch{return!1}}calculateMessageHash(t){return bn(t)}calculateTypedMessageHash(t){const n=typeof t.domain.chainId=="object"?t.domain.chainId.toNumber():Number(t.domain.chainId);let s=t.primaryType;if(!s){const i=Object.values(t.types),r=Object.keys(t.types).filter(a=>i.every(c=>c.every(({type:d})=>d.replace("[","").replace("]","")!==a)));if(r.length===0||r.length>1)throw new Error("Please specify primaryType");s=r[0]}return ln({message:t.message,domain:{...t.domain,chainId:n,verifyingContract:t.domain.verifyingContract,salt:t.domain.salt},types:t.types,primaryType:s})}async getOffChainSignature(t){return(await this.communicator.send(y.getOffChainSignature,t)).data}async isMessageSigned(t,n="0x"){let s;if(typeof t=="string"&&(s=async()=>{const i=this.calculateMessageHash(t);return await this.isMessageHashSigned(i,n)}),de(t)&&(s=async()=>{const i=this.calculateTypedMessageHash(t);return await this.isMessageHashSigned(i,n)}),s)return await s();throw new Error("Invalid message type")}async isMessageHashSigned(t,n="0x"){const s=[this.check1271Signature.bind(this),this.check1271SignatureBytes.bind(this)];for(const i of s)if(await i(t,n))return!0;return!1}async getEnvironmentInfo(){return(await this.communicator.send(y.getEnvironmentInfo,void 0)).data}async requestAddressBook(){return(await this.communicator.send(y.requestAddressBook,void 0)).data}}_n([Sn()],Ge.prototype,"requestAddressBook",null);class In{constructor(t={}){const{allowedDomains:n=null,debug:s=!1}=t;this.communicator=new dt(n,s),this.eth=new St(this.communicator),this.txs=new Tt(this.communicator),this.safe=new Ge(this.communicator),this.wallet=new ke(this.communicator)}}const wn=In,vn=j.Operation,Nn=j.TokenType,Pn=j.TransactionStatus,Cn=j.TransferDirection;export{G as MessageFormatter,y as Methods,vn as Operation,p as RPC_CALLS,X as RestrictedMethods,Nn as TokenType,Pn as TransactionStatus,Cn as TransferDirection,wn as default,ot as getSDKVersion,de as isObjectEIP712TypedData};
